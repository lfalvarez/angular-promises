/*! angular-promises`- v0.0.0 - 2015-11-12
* Copyright (c) 2015 Ciudadano Inteligente; Licensed  */
"use strict";function slugify(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var Category=function(a){this.name=a,this.slug=slugify(a),this.promises=[]};Category.prototype.add_promise=function(a){a.category=this,this.promises.push(a)},angular.module("ddah.promises",["ddah.promises.Promise"]).value("Category",Category);var Prom=function(){this.name="",this.description="",this.fulfillment=0,this.ponderator=1,this.quality=1,this.category=null};Prom.prototype.ponderated_fulfillment=function(){return this.fulfillment*this.ponderator},Prom.prototype.ponderated_quality=function(){return this.quality*this.ponderator},angular.module("ddah.promises",[]).value("Promise",Prom);var constructor=function(){},promise_pusher=function(a,b){return b.category=a,a.promises.push(b),a},transformCategory=function(a){var b=new Category(a.category),c=new Prom;return angular.extend(c,a),promise_pusher(b,c)},getCategoryAndPromise=function(a){var b=[];return angular.forEach(a,function(a){var c=transformCategory(a,constructor),d=b.map(function(a){return a.name}).indexOf(c.name),e=d>-1;if(e){var f=c.promises[0];b[d]=promise_pusher(b[d],f)}else b.push(c)},this),b},ddahTransformer=function(a){if(!angular.isArray(a)){var b=[];b.push(a),a=b}return getCategoryAndPromise(a)};angular.module("ddah.promises",["ddah.promises.Promise","ddah.promises.Category"]).factory("ddahTransformer",ddahTransformer),angular.module("ddah.promises",[]);var ddahAPP=angular.module("ddah",["ddah.promises"]);ddahAPP.controller("DDAHCategoriesController",["$scope",function(a){"undefined"==typeof a.data?a.categories=[]:a.categories=ddahTransformer(a.data)}]);